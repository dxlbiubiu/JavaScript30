<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Custom Video Player</title>
	<link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body>
	<div class="player">
		<video class="player__video viewer" src="https://player.vimeo.com/external/194837908.sd.mp4?s=c350076905b78c67f74d7ee39fdb4fef01d12420&profile_id=164">
		</video>
		<div class="player__controls">
			<div class="progress">
				<div class="progress__filled"></div>
			</div>
			<button class="player__button toggle" title="Toggle Play">►</button>
			<input type="range" name="volume" class="player__slider" min="0" max="1" step="0.05" value="1"/>
			<input type="range" name="playbackRate" class="player__slider" min="0.5" max="2" step="0.1" value="1"/>
			<button data-skip="-10" class="player__button">« 10s</button>
			<button data-skip="25" class="player__button">25s »</button>
		</div>
	</div>
	<script type="text/javascript">
		const player = document.querySelector('.player');
		const video = player.querySelector('.viewer')
		const progress = player.querySelector('.progress');
		const progressBar = player.querySelector('.progress__filled');
		const toggle = player.querySelector('.toggle');
		const skipButtons = player.querySelectorAll('[data-skip');
		const ranges = player.querySelectorAll('.player__silder');
		
		//点击播放
		video.addEventListener('click', videoplay);
		//点击或者播放时改变播放器和暂停状态的图表
		video.addEventListener('play', handleToggle);
		//暂停时改变图表状态
		video.addEventListener('pause',handleToggle);
		//时间轴更新
		video.addEventListener('timeupdate', filledUpdate);
		
		//点击播放或者暂停的图表事件的监听
		toggle.addEventListener('click', videoplay);
		toggle.addEventListener('click',handleToggle);
		
		//音量和播放速度滑动条事件监听
		let mouseflag = false;
		
		//快进按钮事件监听
		
		//播放事件轴拖拽监听
		let filledflag = false;
		progressBar.addEventListener('click', handlefilled);
		progress.addEventListener('mousemove', (e) => filledflag && handlefilled(e));
		progress.addEventListener('mousedown', () => filledflag = true);
		progress.addEventListener('mouseup', () => filledflag = false);
		
		//视频播放与暂停转换函数
		function videoplay (e) {
			const method = video.paused ? 'play' : 'pause';
			video[method]();
		}
		
		//播放按钮状态显示函数
		function handleToggle () {
			let icon = video.paused ? '►' : '❚ ❚';
			toggle.textContent = icon;
		}
		
		//音量大小和播放速度控制函数
		function handlePlayerSlider (e) {
			video[e.target.name] = e.target.target.value;
		}
		
		//快进快退函数
		function handleSkip (e) {
			let skiptime = parseFloat(this.dataset.skip);
			video.currentTime += skiptime;
		}
		
		//进度条随播放时间而显示的函数
		function filledUpdate () {
			let portion = parseFloat(video.currentTime / video.duration) * 100;
			progressBar.style.flexBasis = `&{portion}%`;
		}
		
		//拖拽进度条定点观看的函数
		function handlefilled (e) {
			let pice = (e.offsetX / progressBar.offsetWidth) * video.duration;
			video.currentTime = pice;
		}
	</script>
</body>
</html>